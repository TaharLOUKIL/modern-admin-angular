import { BlockUIServiceInstance } from '../block-ui.module';
export let blockInstanceGuid = 1;
export function BlockUI(blockName, settings = {}) {
    if (!settings.scopeToInstance) {
        return function (target, propertyKey) {
            target[propertyKey] = BlockUIServiceInstance.decorate(blockName);
        };
    }
    return function (target, key) {
        const secret = `_${key}-block-ui`;
        Object.defineProperty(target, key, {
            get: function () {
                if (this[secret]) {
                    return this[secret];
                }
                const instanceName = `${blockName}-${blockInstanceGuid++}`;
                this[secret] = BlockUIServiceInstance.decorate(instanceName);
                return this[secret];
            },
            set: function (value) {
                this[secret] = value;
            },
        });
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2stdWkuZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctYmxvY2stdWkvIiwic291cmNlcyI6WyJkZWNvcmF0b3JzL2Jsb2NrLXVpLmRlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUc1RCxNQUFNLENBQUMsSUFBSSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFFakMsTUFBTSxVQUFVLE9BQU8sQ0FBQyxTQUFrQixFQUFFLFdBQXFDLEVBQUU7SUFDakYsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEVBQUU7UUFDN0IsT0FBTyxVQUFVLE1BQVksRUFBRSxXQUFvQjtZQUNqRCxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsc0JBQXNCLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQztLQUNIO0lBR0QsT0FBTyxVQUFVLE1BQVksRUFBRSxHQUFZO1FBQ3pDLE1BQU0sTUFBTSxHQUFHLElBQUksR0FBRyxXQUFXLENBQUM7UUFFbEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1lBQ2pDLEdBQUcsRUFBRTtnQkFDSCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtvQkFDaEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3JCO2dCQUVELE1BQU0sWUFBWSxHQUFHLEdBQUcsU0FBUyxJQUFJLGlCQUFpQixFQUFFLEVBQUUsQ0FBQztnQkFDM0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLHNCQUFzQixDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFFN0QsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFDdEIsQ0FBQztZQUNELEdBQUcsRUFBRSxVQUFVLEtBQVU7Z0JBQ3ZCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxLQUFLLENBQUM7WUFDdkIsQ0FBQztTQUNGLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCbG9ja1VJU2VydmljZUluc3RhbmNlIH0gZnJvbSAnLi4vYmxvY2stdWkubW9kdWxlJztcbmltcG9ydCB7IEJsb2NrVUlEZWNvcmF0b3JTZXR0aW5ncyB9IGZyb20gJy4uL21vZGVscy9ibG9jay11aS1kZWNvcmF0b3Itc2V0dGluZ3MubW9kZWwnO1xuXG5leHBvcnQgbGV0IGJsb2NrSW5zdGFuY2VHdWlkID0gMTtcblxuZXhwb3J0IGZ1bmN0aW9uIEJsb2NrVUkoYmxvY2tOYW1lPzogc3RyaW5nLCBzZXR0aW5nczogQmxvY2tVSURlY29yYXRvclNldHRpbmdzID0ge30pIHtcbiAgaWYgKCFzZXR0aW5ncy5zY29wZVRvSW5zdGFuY2UpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldD86IGFueSwgcHJvcGVydHlLZXk/OiBzdHJpbmcpIHtcbiAgICAgIHRhcmdldFtwcm9wZXJ0eUtleV0gPSBCbG9ja1VJU2VydmljZUluc3RhbmNlLmRlY29yYXRlKGJsb2NrTmFtZSk7XG4gICAgfTtcbiAgfVxuXG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQ/OiBhbnksIGtleT86IHN0cmluZykge1xuICAgIGNvbnN0IHNlY3JldCA9IGBfJHtrZXl9LWJsb2NrLXVpYDtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwge1xuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzW3NlY3JldF0pIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1tzZWNyZXRdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5zdGFuY2VOYW1lID0gYCR7YmxvY2tOYW1lfS0ke2Jsb2NrSW5zdGFuY2VHdWlkKyt9YDtcbiAgICAgICAgdGhpc1tzZWNyZXRdID0gQmxvY2tVSVNlcnZpY2VJbnN0YW5jZS5kZWNvcmF0ZShpbnN0YW5jZU5hbWUpO1xuXG4gICAgICAgIHJldHVybiB0aGlzW3NlY3JldF07XG4gICAgICB9LFxuICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWU6IGFueSkge1xuICAgICAgICB0aGlzW3NlY3JldF0gPSB2YWx1ZTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH07XG59XG4iXX0=