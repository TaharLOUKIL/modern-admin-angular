import { BlockUIServiceInstance } from '../block-ui.module';
export var blockInstanceGuid = 1;
export function BlockUI(blockName, settings) {
    if (settings === void 0) { settings = {}; }
    if (!settings.scopeToInstance) {
        return function (target, propertyKey) {
            target[propertyKey] = BlockUIServiceInstance.decorate(blockName);
        };
    }
    return function (target, key) {
        var secret = "_" + key + "-block-ui";
        Object.defineProperty(target, key, {
            get: function () {
                if (this[secret]) {
                    return this[secret];
                }
                var instanceName = blockName + "-" + blockInstanceGuid++;
                this[secret] = BlockUIServiceInstance.decorate(instanceName);
                return this[secret];
            },
            set: function (value) {
                this[secret] = value;
            },
        });
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmxvY2stdWkuZGVjb3JhdG9yLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmctYmxvY2stdWkvIiwic291cmNlcyI6WyJkZWNvcmF0b3JzL2Jsb2NrLXVpLmRlY29yYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQztBQUc1RCxNQUFNLENBQUMsSUFBSSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7QUFFakMsTUFBTSxVQUFVLE9BQU8sQ0FBQyxTQUFrQixFQUFFLFFBQXVDO0lBQXZDLHlCQUFBLEVBQUEsYUFBdUM7SUFDakYsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLEVBQUU7UUFDN0IsT0FBTyxVQUFVLE1BQVksRUFBRSxXQUFvQjtZQUNqRCxNQUFNLENBQUMsV0FBVyxDQUFDLEdBQUcsc0JBQXNCLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQztLQUNIO0lBR0QsT0FBTyxVQUFVLE1BQVksRUFBRSxHQUFZO1FBQ3pDLElBQU0sTUFBTSxHQUFHLE1BQUksR0FBRyxjQUFXLENBQUM7UUFFbEMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFO1lBQ2pDLEdBQUcsRUFBRTtnQkFDSCxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsRUFBRTtvQkFDaEIsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ3JCO2dCQUVELElBQU0sWUFBWSxHQUFNLFNBQVMsU0FBSSxpQkFBaUIsRUFBSSxDQUFDO2dCQUMzRCxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsc0JBQXNCLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUU3RCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN0QixDQUFDO1lBQ0QsR0FBRyxFQUFFLFVBQVUsS0FBVTtnQkFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssQ0FBQztZQUN2QixDQUFDO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJsb2NrVUlTZXJ2aWNlSW5zdGFuY2UgfSBmcm9tICcuLi9ibG9jay11aS5tb2R1bGUnO1xuaW1wb3J0IHsgQmxvY2tVSURlY29yYXRvclNldHRpbmdzIH0gZnJvbSAnLi4vbW9kZWxzL2Jsb2NrLXVpLWRlY29yYXRvci1zZXR0aW5ncy5tb2RlbCc7XG5cbmV4cG9ydCBsZXQgYmxvY2tJbnN0YW5jZUd1aWQgPSAxO1xuXG5leHBvcnQgZnVuY3Rpb24gQmxvY2tVSShibG9ja05hbWU/OiBzdHJpbmcsIHNldHRpbmdzOiBCbG9ja1VJRGVjb3JhdG9yU2V0dGluZ3MgPSB7fSkge1xuICBpZiAoIXNldHRpbmdzLnNjb3BlVG9JbnN0YW5jZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0PzogYW55LCBwcm9wZXJ0eUtleT86IHN0cmluZykge1xuICAgICAgdGFyZ2V0W3Byb3BlcnR5S2V5XSA9IEJsb2NrVUlTZXJ2aWNlSW5zdGFuY2UuZGVjb3JhdGUoYmxvY2tOYW1lKTtcbiAgICB9O1xuICB9XG5cblxuICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldD86IGFueSwga2V5Pzogc3RyaW5nKSB7XG4gICAgY29uc3Qgc2VjcmV0ID0gYF8ke2tleX0tYmxvY2stdWlgO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXNbc2VjcmV0XSkge1xuICAgICAgICAgIHJldHVybiB0aGlzW3NlY3JldF07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbnN0YW5jZU5hbWUgPSBgJHtibG9ja05hbWV9LSR7YmxvY2tJbnN0YW5jZUd1aWQrK31gO1xuICAgICAgICB0aGlzW3NlY3JldF0gPSBCbG9ja1VJU2VydmljZUluc3RhbmNlLmRlY29yYXRlKGluc3RhbmNlTmFtZSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXNbc2VjcmV0XTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZTogYW55KSB7XG4gICAgICAgIHRoaXNbc2VjcmV0XSA9IHZhbHVlO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfTtcbn1cbiJdfQ==