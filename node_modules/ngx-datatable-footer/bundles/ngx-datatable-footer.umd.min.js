!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/operators"),require("rxjs"),require("@ngx-translate/core"),require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-datatable-footer",["exports","rxjs/operators","rxjs","@ngx-translate/core","@angular/core","@angular/forms","@angular/common"],t):t(e["ngx-datatable-footer"]={},e.rxjs.operators,e.rxjs,e.core,e.ng.core,e.ng.forms,e.ng.common)}(this,function(e,t,a,n,o,i,r){"use strict";var p=function(){function e(){this.linage=!0,this.displayBothEnds=!0,this.pageNumber=!0,this.pageJumpTime=1e3,this.change=new o.EventEmitter,this.pageChange=new o.EventEmitter,this.maxPage=new o.EventEmitter,this._page=1,this._count=0,this._size=0,this.pageSizeColumn=!0}return Object.defineProperty(e.prototype,"size",{get:function(){return this._size},set:function(e){this._size=e,this.pages=this.calcPages()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(e){this._count=e,this.pages=this.calcPages()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._page},set:function(e){e&&(this._page=e,this.pages=this.calcPages())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalPages",{get:function(){var e=this.size<1?1:Math.ceil(this.count/this.size);return Math.max(e||0,1)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var n=this;this.inputEvent=a.fromEvent(this.customerInput.nativeElement,"input").pipe(t.debounceTime(this.pageJumpTime)).subscribe(function(e){var t;e.target.value&&((t=Number(e.target.value))<1?(t=1,n.customerInput.nativeElement.value=1):t>n.totalPages&&(t=n.totalPages,n.customerInput.nativeElement.value=n.totalPages,n.maxPage.emit(n.totalPages)),n.page=t,n.selectPage(Math.round(t)))})},e.prototype.canPrevious=function(){return 1<this.page},e.prototype.canNext=function(){return this.page<this.totalPages},e.prototype.prevPage=function(){this.selectPage(this.page-1)},e.prototype.nextPage=function(){this.selectPage(this.page+1)},e.prototype.firstPage=function(){this.canPrevious()&&this.selectPage(1)},e.prototype.lastPage=function(){this.canNext()&&this.selectPage(this.totalPages)},e.prototype.selectPage=function(e,t){0<e&&e<=this.totalPages&&(this.page=e,this.currentOffset=e,this.change.emit({page:e}))},e.prototype.calcPages=function(e){var t=[],n=1,a=this.totalPages,o=5<this.totalPages;e=e||this.page,o&&(n=5*(Math.ceil(e/5)-1)+1,a=Math.min(n+5-1,this.totalPages));for(var i=n;i<=a;i++)t.push({number:i,text:i});return t},e.prototype.blurHandel=function(){this.customerInput.nativeElement.value=this.page},e.prototype.changePageSize=function(e){this.datatable.limit=e,this.selectPage(1,"changePageSize")},e.prototype.keyDownHandel=function(e){if(this.customerInput.nativeElement.value&&(this.prveOffset=Number(this.customerInput.nativeElement.value)),e.keyCode<48&&8!==e.keyCode||57<e.keyCode&&e.keyCode<96||105<e.keyCode)return!1},e.prototype.ngOnDestroy=function(){this.inputEvent.unsubscribe()},e.decorators=[{type:o.Component,args:[{selector:"app-datatable-pager",template:' <ul class="pager">\n    <li\n      class="page-size-continer"\n      *ngIf="linage"\n      (click)="pageSizeColumn = !pageSizeColumn"\n      (mouseleave)="pageSizeColumn = true"\n    >\n      <span>{{ size }} {{ labels.line }}/{{ labels.page }}</span>\n      <span\n        class="fa"\n        [ngClass]="{\n          \'fa-angle-up\': pageSizeColumn,\n          \'fa-angle-down\': !pageSizeColumn\n        }"\n      ></span>\n      <ul [hidden]="pageSizeColumn" class="page-size-content">\n        <li\n          *ngFor="let ps of pageSizes"\n          (click)="changePageSize(ps)"\n          [ngClass]="{ \'page-size-column-active\': size === ps }"\n        >\n          {{ ps }} {{ labels.line }}/{{ labels.page }}\n        </li>\n      </ul>\n    </li>\n    <li *ngIf="displayBothEnds" [class.disabled]="!canPrevious()">\n      <a (click)="firstPage()">\n        <i class="{{ pagerPreviousIcon }}"></i>\n      </a>\n    </li>\n    <li [class.disabled]="!canPrevious()">\n      <a (click)="prevPage()">\n        <i class="{{ pagerLeftArrowIcon }}"></i>\n      </a>\n    </li>\n    <li\n      class="pages"\n      *ngFor="let pg of pages"\n      [class.active]="pg.number === page"\n    >\n      <a *ngIf="pageNumber" (click)="selectPage(pg.number)">\n        {{ pg.text }}\n      </a>\n    </li>\n    <li [class.disabled]="!canNext()">\n      <a (click)="nextPage()">\n        <i class="{{ pagerRightArrowIcon }}"></i>\n      </a>\n    </li>\n    <li *ngIf="displayBothEnds" [class.disabled]="!canNext()">\n      <a (click)="lastPage()">\n        <i class="{{ pagerNextIcon }}"></i>\n      </a>\n    </li>\n    <li [ngStyle]="{ position: \'relative\' }">\n      <span>{{ labels.jumpTo }}</span>\n      <input\n        #customerInput\n        class="lz-jump-page"\n        type="number"\n        title=" "\n        rows="2"\n        [min]="1"\n        [ngModel]="page"\n        (keydown)="keyDownHandel($event)"\n        (blur)="blurHandel()"\n      />{{ labels.page }}\n    </li>\n  </ul>',styles:['\n      .page-size-continer {\n        position: relative;\n        min-width: 80px;\n        height: 26px;\n        line-height: 26px;\n        text-align: center;\n        border-radius: 2px;\n        cursor: pointer;\n        padding: 0 10px !important;\n      }\n      .page-size-continer:hover {\n        background-color: rgba(158, 158, 158, 0.2);\n      }\n      .page-size-continer .page-size-content {\n        position: absolute;\n        bottom: 24px;\n        left: 0;\n        padding: 0;\n        background: #fff;\n        border-radius: 4px;\n        box-shadow: 0 0 15px 1px rgba(113, 106, 202, 0.2);\n        z-index: 11;\n      }\n      .page-size-continer .page-size-content li {\n        width: 100%;\n        padding: 4px 0;\n      }\n      .page-size-continer .page-size-content li:hover {\n        background-color: rgba(158, 158, 158, 0.2);\n      }\n      .page-size-continer .page-size-content .page-size-column-active {\n        color: #409eff;\n      }\n      input[type="number"]::-webkit-inner-spin-button,\n      input[type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none;\n      }\n      .lz-jump-page {\n        display: inline-block;\n        width: 50px;\n        border-radius: 2px;\n        margin-right: 6px;\n        padding-left: 4px;\n        border: solid 1px #ebedf2;\n      }\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n    ']}]}],e.propDecorators={pagerLeftArrowIcon:[{type:o.Input}],pagerRightArrowIcon:[{type:o.Input}],pagerPreviousIcon:[{type:o.Input}],pagerNextIcon:[{type:o.Input}],pageSizes:[{type:o.Input}],datatable:[{type:o.Input}],linage:[{type:o.Input}],displayBothEnds:[{type:o.Input}],pageNumber:[{type:o.Input}],pageJumpTime:[{type:o.Input}],labels:[{type:o.Input}],size:[{type:o.Input}],count:[{type:o.Input}],page:[{type:o.Input}],change:[{type:o.Output}],pageChange:[{type:o.Output}],maxPage:[{type:o.Output}],customerInput:[{type:o.ViewChild,args:["customerInput"]}]},e}(),s=function(){function e(e){var t=this;this.translate=e,this.defaultLabels={current:"当前 ",line:"行",page:"页",jumpTo:"跳转到"},this.update(),this.translate.onLangChange.subscribe(function(e){setTimeout(function(){t.update()},0)})}return e.prototype.update=function(){var t=this;this._language=localStorage.getItem("lang"),"zh-CN"!==this._language&&this._language?this._language&&this._language&&this.translate.get("ngxFooterSettings.labels").subscribe(function(e){t.labels=e}):this.labels=this.defaultLabels},e.decorators=[{type:o.Injectable}],e.ctorParameters=function(){return[{type:n.TranslateService}]},e}(),g=function(){function e(e){this.config=e,this.pagerLeftArrowIcon="fa fa-angle-left",this.pagerRightArrowIcon="fa fa-angle-right",this.pagerPreviousIcon="fa fa-step-backward",this.pagerNextIcon="fa fa-step-forward",this.pageSizes=[10,20,30,40,50],this.totalNumber=!0,this.linage=!0,this.displayBothEnds=!0,this.pageNumber=!0,this.pageJumpTime=1e3,this.pageChange=new o.EventEmitter,this.maxPage=new o.EventEmitter}return Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(e){this._template=e,this.update()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datatable",{get:function(){return this._datatable},set:function(e){this._datatable=e,this.update()},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.update=function(){!this._datatable||!this._template||this._datatable.footer&&this._datatable.footer.template||(this._datatable.footer?this._datatable.footer.template=this._template:this._datatable.footer={footerHeight:this._datatable.footerHeight,totalMessage:this._datatable.messages.totalMessage,selectedMessage:this._datatable.messages.selectedMessage,pagerLeftArrowIcon:"",pagerRightArrowIcon:"",pagerPreviousIcon:"",pagerNextIcon:"",template:this._template})},e.prototype.onFooterPage=function(e){"number"==typeof e.page&&this.datatable.onFooterPage(e)},e.prototype.emitPage=function(e){"number"==typeof e.page&&this.pageChange.emit(e)},e.prototype.emitMaxPage=function(e){this.maxPage.emit(e)},e.decorators=[{type:o.Component,args:[{selector:"ngx-datatable-footer",template:' <ng-template\n    ngx-datatable-footer-template\n    let-rowCount="rowCount"\n    let-pageSize="pageSize"\n    let-selectedCount="selectedCount"\n    let-curPage="curPage"\n    let-offset="offset"\n  >\n    <div\n      class="page-count"\n      *ngIf="rowCount > 0 && totalNumber"\n      [innerHTML]="\n        config.labels.current +\n        ((offset || 0) * pageSize + 1) +\n        \' - \' +\n        ((offset + 1) * pageSize > rowCount\n          ? rowCount\n          : (offset + 1 || 1) * pageSize) +\n        \' / \' +\n        rowCount +\n        config.labels.line\n      "\n    ></div>\n    <app-datatable-pager\n      *ngIf="rowCount > 0"\n      [linage]="linage"\n      [displayBothEnds]="displayBothEnds"\n      [pageNumber]="pageNumber"\n      [pageSizes]="pageSizes"\n      [pagerPreviousIcon]="pagerPreviousIcon"\n      [pagerNextIcon]="pagerNextIcon"\n      [pagerLeftArrowIcon]="pagerLeftArrowIcon"\n      [pagerRightArrowIcon]="pagerRightArrowIcon"\n      [page]="curPage"\n      [size]="pageSize"\n      [pageJumpTime]="pageJumpTime"\n      [datatable]="datatable"\n      [count]="rowCount"\n      [labels]="config.labels"\n      (change)="onFooterPage($event); emitPage($event)"\n      (pageChange)="emitPage($event)"\n      (maxPage)="emitMaxPage($event)"\n      class="datatable-pager"\n    >\n    </app-datatable-pager>\n  </ng-template>'}]}],e.ctorParameters=function(){return[{type:s}]},e.propDecorators={template:[{type:o.ViewChild,args:[o.TemplateRef]}],datatable:[{type:o.Input}],pagerLeftArrowIcon:[{type:o.Input}],pagerRightArrowIcon:[{type:o.Input}],pagerPreviousIcon:[{type:o.Input}],pagerNextIcon:[{type:o.Input}],pageSizes:[{type:o.Input}],totalNumber:[{type:o.Input}],linage:[{type:o.Input}],displayBothEnds:[{type:o.Input}],pageNumber:[{type:o.Input}],page:[{type:o.Input}],pageJumpTime:[{type:o.Input}],pageChange:[{type:o.Output}],maxPage:[{type:o.Output}]},e}(),l=function(){function e(){}return e.forRoot=function(){return{ngModule:e}},e.decorators=[{type:o.NgModule,args:[{imports:[r.CommonModule,i.FormsModule],declarations:[p,g],exports:[p,g],providers:[s]}]}],e}();e.DatatablePagerComponent=p,e.DatatableFooterComponent=g,e.NgxDatatableFooterModule=l,e.ɵa=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-datatable-footer.umd.min.js.map