import{__decorate as t}from"tslib";import{LitElement as o,html as s}from"lit";import{query as e}from"lit/decorators/query.js";import{baseStyles as i,setAttributes as r,syncProps as a,syncDefinedProps as l,describeElementByElements as n,updateComponentLayout as c,property as d,querySlot as p,querySlotAll as h,id as u,event as y}from"@cds/core/internal";import{ClarityIcons as m}from"@cds/core/icon/icon.service.js";import{exclamationCircleIcon as g}from"@cds/core/icon/shapes/exclamation-circle.js";import{checkCircleIcon as v}from"@cds/core/icon/shapes/check-circle.js";import b from"./control-group.element.scss.js";import{defaultFormLayout as f,defaultControlWidth as L,getStatusIcon as C,inlineControlListIsWrapped as A,controlIsWrapped as z,getCurrentMessageStatus as S,formLayouts as $}from"../utils/index.js";class G extends o{constructor(){super(),this.status="neutral",this.layout=f,this.controlAlign="left",this.disabled=!1,this.controlWidth=L,this.responsive=!0,this.isInlineControlGroup=!1,this.isControlGroup=!0,this.observers=[],m.addIcons(g,v)}static get styles(){return[i,b]}get messagesTemplate(){var t;return s`<div cds-layout="horizontal align:shrink ${(null===(t=this.messages)||void 0===t?void 0:t.length)?"gap:sm":""}" class="messages-container">${this.isInlineControlGroup?"":C(this.status)}<div class="messages"><slot name="message"></slot></div></div>`}get controlsTemplate(){return this.isInlineControlGroup?s`<div cds-layout="horizontal gap:sm align:horizontal-stretch" class="input-container"><div class="controls" cds-layout="horizontal align:horizontal-stretch"><slot name="controls"></slot></div>${C(this.status)}</div>`:s`<div cds-layout="horizontal align:shrink" class="input-container"><div class="controls" cds-layout="${this.inlineControlLayout}"><slot name="controls"></slot></div></div>`}get inlineControlLayout(){return this.layout.includes("inline")||"compact"===this.layout?"horizontal gap:md":"vertical gap:sm"}get primaryLabelLayout(){return this.layout.includes("vertical")?"vertical gap:sm":"horizontal gap:lg"}get controlMessageLayout(){return("compact"===this.layout?"horizontal":"vertical")+" gap:sm wrap:none align:stretch"}render(){var t;return s`<div class="private-host" cds-layout="${this.primaryLabelLayout}"><cds-internal-control-label .disabled="${this.disabled}" cds-layout="align:top" action="primary"><slot name="label"></slot></cds-internal-control-label><div cds-layout="${this.controlMessageLayout}">${this.controlsTemplate} ${(null===(t=this.messages)||void 0===t?void 0:t.length)?this.messagesTemplate:""}</div></div>`}connectedCallback(){super.connectedCallback(),r(this,["role","group"],["cds-control-group",""])}firstUpdated(t){super.firstUpdated(t),this.associateLabelAndGroup(),this.setupDescribedByUpdates(),this.setupResponsive()}updated(t){super.updated(t),t.set("isControlGroup",!0),this.controls.forEach((t=>t.isControlGroup=!0)),this.messages.forEach((o=>a(o,this,{disabled:t.has("disabled")}))),l(t,this,Array.from(this.controls))}disconnectedCallback(){super.disconnectedCallback(),this.observers.forEach((t=>t.disconnect()))}get layoutStable(){return!A(Array.from(this.controls),this.layout)&&!z(this.controlSlot,this.controlLabel,this.layout)}associateLabelAndGroup(){this.setAttribute("aria-labelledby",this.groupLabelId),this.label.setAttribute("id",this.groupLabelId)}setupDescribedByUpdates(){var t;null===(t=this.messageSlot)||void 0===t||t.addEventListener("slotchange",(()=>{n(this,Array.from(this.messages)),S(Array.from(this.messages)).then((t=>this.status=t))}))}setupResponsive(){if(this.responsive){const t={layouts:$,initialLayout:this.layout},o=c(this,t,(()=>this.layoutChange.emit(this.layout,{bubbles:!0})));this.observers.push(o)}}}t([d({type:String})],G.prototype,"status",void 0),t([d({type:String})],G.prototype,"layout",void 0),t([d({type:String})],G.prototype,"controlAlign",void 0),t([d({type:Boolean})],G.prototype,"disabled",void 0),t([d({type:String})],G.prototype,"controlWidth",void 0),t([d({type:Boolean})],G.prototype,"responsive",void 0),t([p("label",{assign:"label",required:"warning",requiredMessage:"To meet a11y standards a <label> should be provided"})],G.prototype,"label",void 0),t([h("cds-control, [cds-control]")],G.prototype,"controls",void 0),t([h("cds-control-message")],G.prototype,"messages",void 0),t([e("cds-internal-control-label[action=primary]")],G.prototype,"controlLabel",void 0),t([e(".controls")],G.prototype,"controlSlot",void 0),t([e(".messages")],G.prototype,"messageSlot",void 0),t([u()],G.prototype,"groupLabelId",void 0),t([y()],G.prototype,"layoutChange",void 0);export{G as CdsInternalControlGroup};
//# sourceMappingURL=control-group.element.js.map
